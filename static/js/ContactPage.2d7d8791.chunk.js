"use strict";(self.webpackChunkphonebook_frontend=self.webpackChunkphonebook_frontend||[]).push([[718],{7569:function(e,n,r){r.r(n),r.d(n,{default:function(){return X}});var t=r(1087),a=r(9439),o=r(4554),i=r(6151),s=r(15),c=r(9823),l=r(3400),u=r(5861),d=r(4687),x=r.n(d),m=r(4903),h=r(2791),p=r(5985),f=r(890),v=r(1889),j=r(5100),Z=r(184),g=function(e){e.name,e.email,e.phone;var n=e.onSubmit,r=e.btnText,t=function(){var e=(0,u.Z)(x().mark((function e(r){var t,a,o,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),t=r.target,a=t.name.value,o=t.email.value,i=t.phone.value,n({name:a,email:o,phone:i});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)(o.Z,{component:"form",noValidate:!0,onSubmit:t,sx:{mt:3},children:(0,Z.jsxs)(v.ZP,{container:!0,rowSpacing:1,children:[(0,Z.jsx)(v.ZP,{item:!0,width:"100%",children:(0,Z.jsx)(j.Z,{autoComplete:"given-name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0})}),(0,Z.jsx)(v.ZP,{item:!0,width:"100%",children:(0,Z.jsx)(j.Z,{required:!0,fullWidth:!0,id:"phone",label:"Phone",name:"phone",autoComplete:"phone"})}),(0,Z.jsx)(v.ZP,{item:!0,width:"100%",children:(0,Z.jsx)(j.Z,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),(0,Z.jsx)(o.Z,{sx:{marginLeft:"auto",marginRight:"auto"},children:(0,Z.jsx)(i.Z,{type:"submit",width:"50%",variant:"contained",sx:{mt:3,mb:2},children:r})})]})})},b=function(){var e=(0,m.Tn)(),n=(0,a.Z)(e,2),r=n[0],t=n[1],o=t.isSuccess,i=t.isError,s=t.error,c=(0,m.Jx)().data,l=function(){var e=(0,u.Z)(x().mark((function e(n){var t,a,o;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,a=n.email,o=n.phone,!c.find((function(e){return e.name===t}))){e.next=7;break}return p.Am.error("".concat(t," is already in contacts.")),e.abrupt("return");case 7:if(!(t&&a&&o)){e.next=18;break}return e.prev=8,e.next=11,r({name:t,email:a,phone:o});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),p.Am.error(e.t0.message);case 16:e.next=19;break;case 18:p.Am.error("Please fill all Input");case 19:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){o&&p.Am.success("Contact is added to Phonebook."),i&&p.Am.error(null===s||void 0===s?void 0:s.data.message)}),[null===s||void 0===s?void 0:s.data.message,o,i]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(f.Z,{variant:"h6",component:"h2",align:"center",color:"#1976d2",children:"Add Contact"}),(0,Z.jsx)(g,{btnText:"Add Contact",onSubmit:l})]})},w={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"1px solid #1a76d2",boxShadow:24,p:4};function y(){var e=(0,h.useState)(!1),n=(0,a.Z)(e,2),r=n[0],t=n[1],u=function(){return t(!1)};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(i.Z,{type:"button",width:"160px",variant:"contained",sx:{mt:3,mb:2},onClick:function(){return t(!0)},children:"Add Contact"}),(0,Z.jsx)(s.Z,{open:r,onClose:u,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Z.jsxs)(o.Z,{sx:w,children:[(0,Z.jsx)(l.Z,{onClick:u,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,Z.jsx)(c.Z,{})}),(0,Z.jsx)(b,{})]})})]})}var k=function(){return(0,Z.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",p:1,m:1,borderRadius:2,bgcolor:"background.paper"},children:[(0,Z.jsx)(y,{sx:{p:1,m:1,height:1}}),(0,Z.jsx)(o.Z,{sx:{p:1,m:1,height:1,marginTop:2},children:(0,Z.jsx)(i.Z,{component:t.rU,variant:"contained",to:"/home",children:"Contacts"})}),(0,Z.jsx)(o.Z,{sx:{p:1,height:1,marginTop:2},children:(0,Z.jsx)(i.Z,{component:t.rU,variant:"contained",to:"/favorites",children:"Favorites"})}),(0,Z.jsx)(o.Z,{sx:{p:1,height:1,marginTop:2},children:(0,Z.jsx)(i.Z,{component:t.rU,variant:"contained",to:"/account",children:"Account"})})]})},C=r(7689),A=r(468),S=r(3044),E=r(9665),P=function(){var e=(0,A._y)(),n=(0,a.Z)(e,1)[0],r=(0,E.a)().user,t=(0,C.s0)(),s=r.name,c=r.avatarURL,l=r.id,d=function(){var e=(0,u.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(l);case 2:p.Am.success("Logout Successfully"),t("/auth");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(o.Z,{sx:{gridTemplateColumns:"repeat(4, 2fr)",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px"},children:["Wellcome,",(0,Z.jsx)(S.Z,{src:c,alt:"avatar"}),s,(0,Z.jsx)(i.Z,{variant:"contained",onClick:d,children:"Logout"})]})},T=r(4395),L=r(4663),_=r(5126),F=function(){var e=(0,E.a)().token;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(T.Z,{position:"static",children:(0,Z.jsxs)(L.Z,{children:[(0,Z.jsx)(l.Z,{color:"inherit",children:(0,Z.jsx)(_.Z,{})}),(0,Z.jsx)(f.Z,{variant:"h6",sx:{flexGrow:1},children:"Phone Book"}),e?(0,Z.jsx)(P,{}):(0,Z.jsx)(k,{})]})})})},W=r(1614),D=r(5048),U=r(4808),z=function(){var e=(0,D.I0)();return(0,Z.jsx)(j.Z,{id:"standard-search",type:"search",variant:"standard",label:"find by name",sx:{mb:"1.5rem"},fullWidth:!0,onChange:function(n){e((0,U.Tv)(n.target.value))}})},I=r(1413),q=r(7621),B=r(9504),G=r(7237),J=r(7488),R=r(3053),K=r(9891),N=r(2898),O={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Y=function(e){var n=e.id,r=(0,h.useState)(!1),t=(0,a.Z)(r,2),i=t[0],d=t[1],v=(0,m.Jx)().data,j=v.filter((function(e){return e._id===n})),b=(0,m.Nt)(),w=(0,a.Z)(b,2),y=w[0],k=w[1],C=k.isError,A=k.isSuccess,S=k.error,E=(0,m.wv)(),P=(0,a.Z)(E,2),T=P[0],L=P[1],_=L.isSuccess,F=L.isError,W=L.error,D=function(){var e=(0,u.Z)(x().mark((function e(r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!n){e.next=10;break}return e.prev=2,e.next=5,y(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),p.Am.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,u.Z)(x().mark((function e(r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return e.prev=1,e.next=4,T((0,I.Z)({id:n},r));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),p.Am.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){C?p.Am.error(S.data.message):A&&p.Am.warning("Success")})),(0,h.useEffect)((function(){_&&(p.Am.success("Contact is updated"),d(!1)),F&&p.Am.error(null===W||void 0===W?void 0:W.data.message)}),[null===W||void 0===W?void 0:W.data.message,_,F]);var z=(0,h.useState)(null),q=(0,a.Z)(z,2),B=q[0],G=q[1],J=Boolean(B);return console.log("findContactById[0].name",j[0].name),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(l.Z,{"aria-label":"more",id:"long-button","aria-controls":J?"long-menu":void 0,"aria-expanded":J?"true":void 0,"aria-haspopup":"true",onClick:function(e){G(e.currentTarget)},children:(0,Z.jsx)(N.Z,{})}),(0,Z.jsxs)(R.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:B,open:J,onClose:function(){G(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[(0,Z.jsx)(K.Z,{onClick:D,children:"Delete"}),(0,Z.jsx)(K.Z,{onClick:function(){d(!0)},children:"Edit"})]}),i&&(0,Z.jsx)("div",{children:(0,Z.jsx)(s.Z,{open:i,onClose:function(){d(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Z.jsxs)(o.Z,{sx:O,children:[(0,Z.jsx)(l.Z,{onClick:function(){return d(!1)},sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,Z.jsx)(c.Z,{})}),(0,Z.jsx)(f.Z,{variant:"h6",component:"h2",align:"center",color:"#1976d2",children:"Update Contact"}),v&&(0,Z.jsx)(g,{name:j[0].name,phone:j[0].phone,email:j[0].email,btnText:"Save",onSubmit:U})]})})})]})},H=function(e){var n=e._id,r=e.name,t=e.phone,i=e.email,s=e.favorite,c=(0,m.eE)(),d=(0,a.Z)(c,1)[0],h=function(){var e=(0,u.Z)(x().mark((function e(r){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,d({_id:n,favorite:String(!s)});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsxs)(q.Z,{sx:{maxWidth:354},children:[(0,Z.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(l.Z,{"aria-label":"add to favorites",onClick:h,children:s?(0,Z.jsx)(G.Z,{color:"primary"}):(0,Z.jsx)(J.Z,{color:"primary"})})}),(0,Z.jsx)(Y,{id:n})]}),(0,Z.jsxs)(B.Z,{children:[(0,Z.jsx)(f.Z,{variant:"subtitle1",color:"text.primary",children:r}),(0,Z.jsx)(f.Z,{variant:"body1",color:"text.secondary",children:t}),(0,Z.jsx)(f.Z,{variant:"body1",color:"text.secondary",children:i})]})]})},M=function(){var e=(0,m.Jx)(),n=e.data,r=e.isError,t=e.error,a=(0,D.v9)(U.zK),i=n?n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})):[];return 0===(null===n||void 0===n?void 0:n.length)&&p.Am.warning("Your contact list is empty"),(0,h.useEffect)((function(){r&&(console.log(r),p.Am.error(t.data.message))})),(0,Z.jsx)(o.Z,{sx:{flexGrow:1},children:(0,Z.jsx)(v.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:i.map((function(e){return(0,Z.jsx)(v.ZP,{item:!0,xs:4,sm:4,md:4,children:(0,Z.jsx)(H,(0,I.Z)({},e))},e._id)}))})})},V=function(){var e=(0,m.X_)(),n=e.data,r=e.isError,t=e.error,a=(0,D.v9)(U.zK),i=n?n.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())})):[];return 0===(null===n||void 0===n?void 0:n.length)&&p.Am.warning("Your contact list is empty"),(0,h.useEffect)((function(){r&&(console.log(r),p.Am.error(t.data.message))})),(0,Z.jsx)(o.Z,{sx:{flexGrow:1},children:(0,Z.jsx)(v.ZP,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:i.map((function(e){return(0,Z.jsx)(v.ZP,{item:!0,xs:4,sm:4,md:4,children:(0,Z.jsx)(H,(0,I.Z)({},e))},e._id)}))})})},X=function(){var e=(0,C.TH)().pathname;return(0,Z.jsxs)(W.Z,{width:{xs:"320px",sm:"768px",md:"1280px"},children:[(0,Z.jsx)(F,{}),(0,Z.jsx)(k,{}),"/home"===e&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(z,{}),(0,Z.jsx)(M,{})]}),"/favorites"===e&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(z,{}),(0,Z.jsx)(V,{})]})]})}}}]);
//# sourceMappingURL=ContactPage.2d7d8791.chunk.js.map